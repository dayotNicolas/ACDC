<!Doctype html>
<html>
    <head>
        <script src="https://rawgit.com/moment/moment/2.2.1/min/moment.min.js">
        </script>
    <script  src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js">
    </script>
    </head>
    <body>
    {% extends "base.html" %}
    {% block title %}Professional Percentage Department{% endblock %}
    {% block content %}
        <canvas id="myChart" width="400" height="250"></canvas>
<script>
const ctx = document.getElementById('myChart').getContext('2d');
var data = []
var labels = []
{% for vaccinPercentage in vaccinPercentages %}
    {% if  vaccinPercentage.region_id == 1  %}
        labels.push({{ vaccinPercentage.date | tojson | safe}})
    {% endif %}
{% endfor %}
console.log(labels)
{% for vaccinPercentage in vaccinPercentages %}
    {% if  vaccinPercentage.region_id == 1  %}
        data.push({{ vaccinPercentage.dose_completed | tojson | safe}})
    {% endif %}
{% endfor %}
const myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: labels,
        datasets: [{
            label: 'évolution du pourcentage de professionnels vaccinés',
            data: data,
                fill: false,
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: false
            }
        }
    }
});
</script>
    {% endblock %}
    <script type="text/javascript" src="utility.js"></script>
    <script type="text/javascript" src="script.js"></script>
    </body>
</html>